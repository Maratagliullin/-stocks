{"remainingRequest":"/Users/maratagliullin/traiding_project/frontend/stock/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maratagliullin/traiding_project/frontend/stock/src/components/StockForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maratagliullin/traiding_project/frontend/stock/src/components/StockForm.vue","mtime":1621839175000},{"path":"/Users/maratagliullin/traiding_project/frontend/stock/node_modules/cache-loader/dist/cjs.js","mtime":1621533185000},{"path":"/Users/maratagliullin/traiding_project/frontend/stock/node_modules/babel-loader/lib/index.js","mtime":1621533182000},{"path":"/Users/maratagliullin/traiding_project/frontend/stock/node_modules/cache-loader/dist/cjs.js","mtime":1621533185000},{"path":"/Users/maratagliullin/traiding_project/frontend/stock/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vR2V0IFgtQ1NSRlRva2VuCmZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7CiAgbGV0IGNvb2tpZVZhbHVlID0gbnVsbAogIGlmIChkb2N1bWVudC5jb29raWUgJiYgZG9jdW1lbnQuY29va2llICE9PSAnJykgewogICAgY29uc3QgY29va2llcyA9IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOycpCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvb2tpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgY29va2llID0gY29va2llc1tpXS50cmltKCkKICAgICAgLy8gRG9lcyB0aGlzIGNvb2tpZSBzdHJpbmcgYmVnaW4gd2l0aCB0aGUgbmFtZSB3ZSB3YW50PwogICAgICBpZiAoY29va2llLnN1YnN0cmluZygwLCBuYW1lLmxlbmd0aCArIDEpID09PSBuYW1lICsgJz0nKSB7CiAgICAgICAgY29va2llVmFsdWUgPSBkZWNvZGVVUklDb21wb25lbnQoY29va2llLnN1YnN0cmluZyhuYW1lLmxlbmd0aCArIDEpKQogICAgICAgIGJyZWFrCiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIGNvb2tpZVZhbHVlCn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RvY2tGb3JtJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RvY2s6IG51bGwsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgb25TdWJtaXQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7ICAKICAgICAgdGhpcy5heGlvcwogICAgICAgIC5wb3N0KAogICAgICAgICAgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMS9hcGkvdjEvYWRkX3N0b2NrLycsCiAgICAgICAgICB7CiAgICAgICAgICAgIHN0b2NrOiB0aGlzLnN0b2NrLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICdYLUNTUkZUb2tlbic6IGdldENvb2tpZSgnY3NyZnRva2VuJyksCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7ICAKICAgICAgICAgIHRoaXMubm90eWZ5dXNlcihyZXNwb25zZS5kYXRhKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7IAogICAgICAgICAgdGhpcy5ub3R5Znl1c2VyKGVycm9yLnJlc3BvbnNlLmRhdGEpCiAgICAgICAgfSkKICAgIH0sCiAgICBub3R5Znl1c2VyKGRhdGEpIHsKICAgICAgdmFyIGkKICAgICAgZm9yIChpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoZGF0YVtpXS5zdGF0dXMgPT0gJ2ZvdW5kJykgewogICAgICAgICAgdmFyIHRleHQgPSBkYXRhW2ldLm1lc3NhZ2UKICAgICAgICAgIHZhciB0aXRsZSA9IGRhdGFbaV0udGlrZXIKICAgICAgICAgIHZhciB2YXJpYW50ID0gJ3N1Y2Nlc3MnCiAgICAgICAgICB0aGlzLnNob3dfdG9hc3QodGV4dCwgdmFyaWFudCwgdGl0bGUpCiAgICAgICAgfQogICAgICAgIGlmIChkYXRhW2ldLnN0YXR1cyA9PSAnbm90X2ZvdW5kJykgewogICAgICAgICAgdGV4dCA9IGRhdGFbaV0ubWVzc2FnZQogICAgICAgICAgdGl0bGUgPSBkYXRhW2ldLnRpa2VyCiAgICAgICAgICB2YXJpYW50ID0gJ2RhbmdlcicKICAgICAgICAgIHRoaXMuc2hvd190b2FzdCh0ZXh0LCB2YXJpYW50LCB0aXRsZSkKICAgICAgICB9CiAgICAgICAgaWYgKGRhdGFbaV0uc3RhdHVzID09ICdlbXB0eV92YWx1ZScpIHsKICAgICAgICAgIHRleHQgPSBkYXRhW2ldLm1lc3NhZ2UKICAgICAgICAgIHRpdGxlID0gJ9Ce0YjQuNCx0LrQsCcKICAgICAgICAgIHZhcmlhbnQgPSAnZGFuZ2VyJwogICAgICAgICAgdGhpcy5zaG93X3RvYXN0KHRleHQsIHZhcmlhbnQsIHRpdGxlKQogICAgICAgIH0KICAgICAgICBpZiAoZGF0YVtpXS5zdGF0dXMgPT0gJ2R1YmxpY2F0ZScpIHsKICAgICAgICAgIHRleHQgPSBkYXRhW2ldLm1lc3NhZ2UKICAgICAgICAgIHRpdGxlID0gZGF0YVtpXS50aWtlcgogICAgICAgICAgdmFyaWFudCA9ICdpbmZvJwogICAgICAgICAgdGhpcy5zaG93X3RvYXN0KHRleHQsIHZhcmlhbnQsIHRpdGxlKQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHNob3dfdG9hc3QodGV4dCwgdmFyaWFudCwgdGl0bGUpIHsKICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCh0ZXh0LCB7CiAgICAgICAgdGl0bGU6IHRpdGxlLAogICAgICAgIGF1dG9IaWRlRGVsYXk6IDE1MDAwLAogICAgICAgIHZhcmlhbnQ6IHZhcmlhbnQsCiAgICAgICAgYXBwZW5kVG9hc3Q6IHRydWUsCiAgICAgICAgbm9DbG9zZUJ1dHRvbjogZmFsc2UsCiAgICAgIH0pCiAgICB9LAogIH0sCn0K"},{"version":3,"sources":["StockForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StockForm.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"stock_block\">\n    <form @submit.prevent=\"onSubmit\">\n      <div class=\"form-group\">\n        <label class=\"col-form-label\" for=\"stock\">Идентификатор акции</label>\n        <textarea\n          rows=\"3\"\n          v-model=\"stock\"\n          name=\"stock\"\n          type=\"text\"\n          class=\"form-control\"\n          id=\"stock\"\n          aria-describedby=\"phoneHelp\"\n          placeholder=\"\"\n        ></textarea>\n        <small id=\"stockHelp\" class=\"form-text text-muted\">\n          Допускается ввод как одного, так и нескольких значений, каждое из которых начинается с новой строки\n        </small>\n      </div>\n      <button class=\"btn btn-primary\">\n        Добавить\n      </button>\n       <transition name=\"fade\">\n      <b-spinner\n        v-show=\"loading\"\n        variant=\"info\"\n        style=\"width: 1.5rem; height: 1.5rem; margin-top: 5px;\"\n        class=\"float-right\"\n        label=\"Floated Right\"\n      ></b-spinner></transition>\n    </form>\n  </div>\n</template>\n\n<script>\n//Get X-CSRFToken\nfunction getCookie(name) {\n  let cookieValue = null\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';')\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim()\n      // Does this cookie string begin with the name we want?\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1))\n        break\n      }\n    }\n  }\n  return cookieValue\n}\n\nexport default {\n  name: 'StockForm',\n  data() {\n    return {\n      stock: null,\n      loading: false,\n    }\n  },\n  methods: {\n    onSubmit() {\n      this.loading = true;  \n      this.axios\n        .post(\n          'http://localhost:8001/api/v1/add_stock/',\n          {\n            stock: this.stock,\n          },\n          {\n            headers: {\n              'X-CSRFToken': getCookie('csrftoken'),\n            },\n          }\n        )\n        .then((response) => {\n          this.loading = false;  \n          this.notyfyuser(response.data)\n        })\n        .catch((error) => {\n          this.loading = false; \n          this.notyfyuser(error.response.data)\n        })\n    },\n    notyfyuser(data) {\n      var i\n      for (i = 0; i < data.length; i++) {\n        if (data[i].status == 'found') {\n          var text = data[i].message\n          var title = data[i].tiker\n          var variant = 'success'\n          this.show_toast(text, variant, title)\n        }\n        if (data[i].status == 'not_found') {\n          text = data[i].message\n          title = data[i].tiker\n          variant = 'danger'\n          this.show_toast(text, variant, title)\n        }\n        if (data[i].status == 'empty_value') {\n          text = data[i].message\n          title = 'Ошибка'\n          variant = 'danger'\n          this.show_toast(text, variant, title)\n        }\n        if (data[i].status == 'dublicate') {\n          text = data[i].message\n          title = data[i].tiker\n          variant = 'info'\n          this.show_toast(text, variant, title)\n        }\n      }\n    },\n    show_toast(text, variant, title) {\n      this.$bvToast.toast(text, {\n        title: title,\n        autoHideDelay: 15000,\n        variant: variant,\n        appendToast: true,\n        noCloseButton: false,\n      })\n    },\n  },\n}\n</script>\n"]}]}